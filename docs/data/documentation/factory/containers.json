{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Containers are used by Factory to manage object creation, object resolution, and object lifecycles in general."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Factory’s are defined within container extensions, and must be provided with a reference to that container on initialization."}]},{"type":"codeListing","syntax":"swift","code":["extension Container {","    var service: Factory<ServiceType> {","        Factory(self) { MyService() }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Registrations and scope caches will persist as long as the associated container remains in scope."}]},{"anchor":"Passing-Containers","level":2,"type":"heading","text":"Passing Containers"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Containers can be passed along from object to object."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s an example of passing an instance of a container to a view model and initializing a service from that container."}]},{"type":"codeListing","syntax":"swift","code":["class ContentViewModel: ObservableObject {","    let service2: MyServiceType","    init(container: Container) {","        service2 = container.service()","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Addtional examples and methods can be seen on the "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Factory\/documentation\/Factory\/Resolutions"},{"type":"text","text":" page."}]},{"anchor":"The-Default-Container","level":2,"type":"heading","text":"The Default Container"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Factory ships with a single "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Factory\/documentation\/Factory\/Container"},{"type":"text","text":" already constructed for your convenience."}]},{"type":"codeListing","syntax":"swift","code":["public final class Container: SharedContainer {","    public static var shared = MyContainer()","    public var manager = ContainerManager()","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You’ve seen it used in many of the examples shown thus far. Just extend it to add your own Factory’s."}]},{"type":"codeListing","syntax":"swift","code":["extension Container {","    var service: Factory<ServiceType> {","        makes { MyService() }","    }","}"]},{"anchor":"Custom-Containers","level":2,"type":"heading","text":"Custom Containers"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’d like to define your own container, use the following as a template."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A contaimer must derive from "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Factory\/documentation\/Factory\/SharedContainer"},{"type":"text","text":", have its own "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Factory\/documentation\/Factory\/ContainerManager"},{"type":"text","text":" and implement a static "},{"type":"codeVoice","code":"shared"},{"type":"text","text":" instance."}]},{"type":"codeListing","syntax":"swift","code":["public final class MyContainer: SharedContainer {","     public static var shared = MyContainer()","     public var manager = ContainerManager()","}","","extension MyContainer {","    var someService: Factory<ServiceType> {","        makes { MyService() }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Property wrappers like @Injected always reference the "},{"type":"codeVoice","code":"shared"},{"type":"text","text":" container for that class type."}]},{"type":"codeListing","syntax":"swift","code":["class ContentViewModel: ObservableObject {","    @Injected(\\MyContainer.anotherService) var anotherService","}"]},{"anchor":"SharedContainer","level":2,"type":"heading","text":"SharedContainer"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/Factory\/documentation\/Factory\/SharedContainer"},{"type":"text","text":" implements the protocol to which all containers must conform. It also provides a bit of default functionality for each container."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Note that you can extend SharedContainer with your own Factory definitions. T"}]},{"type":"codeListing","syntax":"swift","code":["extension SharedContainer {","    var commonSerice: Factory<ServiceType> {","        makes { MyService() }","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Those Factory’s will be available on every container created."}]},{"type":"codeListing","syntax":"swift","code":["let common1 = Container.shared.commonService()","let common2 = MyContainer.shared.commonService()"]},{"style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Registrations and scopes will be managed by the container on which the dependency was created."}]}],"type":"aside","name":"Important"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/factory\/containers"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Factory\/documentation\/Factory\/Containers","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Containers are the cornerstone of Factory 2.0. What are they and how do we use them?"}],"kind":"article","metadata":{"roleHeading":"Article","title":"Containers","role":"collectionGroup","modules":[{"name":"Factory"}]},"hierarchy":{"paths":[["doc:\/\/Factory\/documentation\/Factory"]]},"seeAlsoSections":[{"title":"The Basics","identifiers":["doc:\/\/Factory\/documentation\/Factory\/GettingStarted","doc:\/\/Factory\/documentation\/Factory\/Scopes"],"generated":true}],"references":{"doc://Factory/documentation/Factory/SharedContainer":{"role":"symbol","title":"SharedContainer","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SharedContainer"}],"abstract":[{"type":"text","text":"SharedContainer defines the protocol all Containers must adopt."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/SharedContainer","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SharedContainer"}],"url":"\/documentation\/factory\/sharedcontainer"},"doc://Factory/documentation/Factory/Scopes":{"role":"collectionGroup","title":"Scopes","abstract":[{"type":"text","text":"Not everything wants to be a Singleton. Learn the power of Scopes."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/Scopes","kind":"article","type":"topic","url":"\/documentation\/factory\/scopes"},"doc://Factory/documentation/Factory/GettingStarted":{"role":"collectionGroup","title":"Getting Started","abstract":[{"type":"text","text":"Defining a Factory, resolving it, and changing the default behavior."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/GettingStarted","kind":"article","type":"topic","url":"\/documentation\/factory\/gettingstarted"},"doc://Factory/documentation/Factory/ContainerManager":{"role":"symbol","title":"ContainerManager","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ContainerManager"}],"abstract":[{"type":"text","text":"ContainerManager encapsulates and manages the registration, resolution, and scope caching mechanisms for a given container."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/ContainerManager","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ContainerManager"}],"url":"\/documentation\/factory\/containermanager"},"doc://Factory/documentation/Factory":{"role":"collection","title":"Factory","abstract":[{"type":"text","text":"A new approach to Container-Based Dependency Injection for Swift and SwiftUI."}],"identifier":"doc:\/\/Factory\/documentation\/Factory","kind":"symbol","type":"topic","url":"\/documentation\/factory"},"doc://Factory/documentation/Factory/Container":{"role":"symbol","title":"Container","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Container"}],"abstract":[{"type":"text","text":"This is the default Container provided for your convenience by Factory."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/Container","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Container"}],"url":"\/documentation\/factory\/container"},"doc://Factory/documentation/Factory/Resolutions":{"role":"article","title":"Sample Resolutions","abstract":[{"type":"text","text":"There are many ways to use Factory to resolve dependencies. Here are a few examples."}],"identifier":"doc:\/\/Factory\/documentation\/Factory\/Resolutions","kind":"article","type":"topic","url":"\/documentation\/factory\/resolutions"}}}